{"version":3,"sources":["components/diceRoller.jsx","components/mapCell.jsx","components/character.jsx","components/spellCircle.jsx","components/boardMap.jsx","components/mapCanvas.jsx","constants.js","components/characterCreator.jsx","components/characterCreatorPopUp.jsx","components/actionsMenu.jsx","apiUtils.js","components/spellCircleCreator.jsx","components/spellCircleCreatorPopUp.jsx","components/loginForm.jsx","components/gameMenu.jsx","components/forgotPasswordForm.jsx","components/registrationForm.jsx","components/aboutPage.jsx","components/welcomeScreen.jsx","components/tempMessage.jsx","components/resetPasswordForm.jsx","components/exitWarningPopUp.jsx","components/App.js","serviceWorker.js","index.js"],"names":["DiceRoller","state","diceType","diceCount","resultSum","undefined","handleRoll","sum","i","Math","floor","random","setState","this","className","htmlFor","type","name","value","id","defaultChecked","onChange","event","target","step","min","max","replace","onClick","hidden","Component","MapCell","props","borderWidth","cell","cursorHover","cellSize","border","background","width","height","wall","cursor","selected","onMouseEnterCell","style","getCellStyle","onMouseEnter","Character","position","transparent","itemDeletionModeOn","clickable","borderStyle","opacity","top","topLeft","row","left","col","pointerEvents","character","image","imageSrc","url","file","src","alt","getStyle","title","SpellCircle","color","spellCircle","transparentColor","r","g","b","radius","borderRadius","owner","BoardMap","matrix","selectedChar","characters","selectedCircle","spellCircles","onCellClick","onCharClick","onCalcCharPosition","placingChar","onSpellCircleClick","onCalcSpellCirclePosition","placingCircle","map","key","j","getBackgroundClass","char","MapCanvas","scale","translation","x","y","mapImage","backgroundImage","mapBgImg","rowCount","colCount","CHARACTER_IMAGES_PATH","process","AVATAR_IMG_URLS","ranger","rogue","sorcerer","warlock","fighter","scorbat","dragon","beetle","balrog","alligator","DefaultFallbackComponent","componentStack","error","toString","avatarsList","Object","values","CharacterCreator","characterName","avatarImage","missingFields","onPickAvatar","handleCancelCreation","initiateState","onCancel","handleCreateButtonClick","onCreation","isHeight","newVal","Number","path","avatarFile","placeholder","required","maxWidth","onChangeSize","images","avatar","onPick","CharacterCreatorPopUp","handleCharacterCreationClick","stateData","closePopup","onCharacterCreation","ActionsMenu","onSpellCircleCreation","onCharacterCircleDelete","onGameSave","enableDeletion","onFinishDeletion","onExitToMenu","disabled","CallLoginAPI","loginData","sendRequest","CallRegisterAPI","userData","CallGetGameDataAPI","authToken","CallSaveNewGameDataAPI","gameState","CallUpdateGameDataAPI","API_URL","createRequest","method","bodyObject","headers","body","JSON","stringify","urlEnd","a","req","console","debug","fetch","res","log","json","data","status","message","stack","spellName","ownerName","isRadiusValid","newRadiusVal","onChangeRadius","rgb","SpellCircleCreatorPopUp","handleSpellCircleCreationClick","LoginForm","email","password","errorMessage","toGameMenu","handleLoginFormSubmit","e","preventDefault","onLogin","then","userName","to","onSubmit","_gameMenuMounted","GameMenu","toLogin","toMap","gameDataExists","continueGameText","handleLogOutClick","onLogOut","handleStartNewGameButtonClick","showWarning","beginNewGame","onStartANewGame","handleContinueGameClick","onContinueSavedGame","cancelRedirectFromMap","checkForExistingGameData","nextProps","href","push","renderGameMenu","renderNotLoggedInError","ForgotPasswordForm","errMessage","messageUnderBox","handleSendButtonClick","callResetPasswordSendAPI","emailSent","RegistrationForm","handleRegisterFormSubmit","onRegistered","AboutPage","MISC_IMAGES_PATH","WelcomeScreen","onNewGame","onRegisteredNewUser","onLogIn","exact","from","TempMessage","textAlignLast","ResetPasswordForm","newPassword","confirmPassword","tokenValid","isLoading","handleChangePasswordFormSubmit","onPasswordReset","getAuthTokenFromParams","isTokenMatchesUSer","hrefParts","window","location","split","length","renderLoadingPage","renderPasswordResetPage","renderAccessDeniedPage","ExitWarningPopUp","handleExitToMenu","handleCancelExit","fontSize","padding","App","walls","ceil","showTempMessage","tempMessageText","bgImageLink","resetPasswordScreen","showCharacterCreatorPopup","showSpellCircleCreatorPopup","showExitWarningPopUp","showGameMenu","handleCellClick","triggerDeselect","spellCircleInd","moveSpellCircle","getSpellCirclesArrWithoutSelection","getCharsArrWithoutSelection","charInd","moveCharacter","handleKeyUp","handleCharClick","deleteCharacter","handleSpellCircleClick","deleteSpellCircle","calcCharPosition","xPixels","yPixels","topLeftRow","topLeftCol","widthCells","heightCells","calcSpellCirclePosition","handleMouseEnterCell","handleCharacterCreation","newChar","toggleCharacterCreatorPopup","handleSpellCircleCreation","newCircle","toggleItemDeletionMode","toggleSpellCircleCreatorPopup","toggleExitWarningPopUp","handleSaveGame","gameStateToSave","createOrUpdateGameState","handleRegisteredNewUser","handleStartNewGame","initiateGame","handleContinueSavedGame","setStateFromSavedGameData","handlePasswordResetComplete","handleLogIn","createMatrix","includes","localStorage","removeItem","savedGameData","myarr","isCellWall","filter","c","charactersCopy","pop","spellCirclesCopy","charToDelete","spellCircleToDelete","selectedCells","lastRowInd","lastColInd","checkIndicesValid","warn","smallRow","smallCol","largeRow","largeCol","indexOf","isNewCharPosValid","circleInd","newPositionInd","selectedCharCopy","CloneDeep","getSelectedCharCells","document","addEventListener","getItem","removeEventListener","body_object","resGet","resPost","messageText","timeoutMs","setTimeout","FallbackComponent","renderMapArea","renderSideBar","renderPopUps","renderPasswordResetScreen","renderMapMainScreen","renderWelcomeScreen","debounce","onMount","Boolean","hostname","match","ReactDOM","render","StrictMode","MAP_IMAGES_PATH","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.5a974c69.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./sideBar.css\";\r\n\r\nclass DiceRoller extends Component {\r\n  state = {\r\n    diceType: 4,\r\n    diceCount: 1,\r\n    resultSum: undefined,\r\n  };\r\n\r\n  handleRoll = () => {\r\n    const { diceCount, diceType } = this.state;\r\n    let sum = 0;\r\n    for (let i = 0; i < diceCount; i++) {\r\n      sum += Math.floor(Math.random() * diceType) + 1;\r\n    }\r\n    this.setState({ resultSum: sum });\r\n  };\r\n\r\n  render() {\r\n    const { diceCount, resultSum } = this.state;\r\n    return (\r\n      <ul className=\"nav nav-tabs flex-column bg-dark row w-100 MenuUl\">\r\n        <h4 className=\"mb-4\">\r\n          <span className=\"creatorHeader\">Roll Dice</span>\r\n        </h4>\r\n        <li className=\"nav-item\">\r\n          <label className=\"mr-3 mb-2 radio control-label\">Dice type:</label>\r\n          <span>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"d-4\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"DieType\"\r\n                value={4}\r\n                id=\"d-4\"\r\n                defaultChecked\r\n                onChange={(event) =>\r\n                  this.setState({ diceType: event.target.value })\r\n                }\r\n              />\r\n              D-4\r\n            </label>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"d-6\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"DieType\"\r\n                value={6}\r\n                id=\"d-6\"\r\n                onChange={(event) =>\r\n                  this.setState({ diceType: event.target.value })\r\n                }\r\n              />\r\n              D-6\r\n            </label>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"d-8\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"DieType\"\r\n                value={8}\r\n                id=\"d-8\"\r\n                onChange={(event) =>\r\n                  this.setState({ diceType: event.target.value })\r\n                }\r\n              />\r\n              D-8\r\n            </label>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"d-10\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"DieType\"\r\n                value={10}\r\n                id=\"d-10\"\r\n                onChange={(event) =>\r\n                  this.setState({ diceType: event.target.value })\r\n                }\r\n              />\r\n              D-10\r\n            </label>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"d-12\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"DieType\"\r\n                value={12}\r\n                id=\"d-12\"\r\n                onChange={(event) =>\r\n                  this.setState({ diceType: event.target.value })\r\n                }\r\n              />\r\n              D-12\r\n            </label>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"d-20\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"DieType\"\r\n                value={20}\r\n                id=\"d-20\"\r\n                onChange={(event) =>\r\n                  this.setState({ diceType: event.target.value })\r\n                }\r\n              />\r\n              D-20\r\n            </label>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"d-100\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"DieType\"\r\n                value={100}\r\n                id=\"d-100\"\r\n                onChange={(event) =>\r\n                  this.setState({ diceType: event.target.value })\r\n                }\r\n              />\r\n              D-100\r\n            </label>\r\n          </span>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <label className=\"mr-1 col-md-5 p-0\">How many dice? </label>\r\n          <input\r\n            className=\"input-group-sm mb-3 form-control col-md-5 d-inline mt-2\"\r\n            id=\"diceCount\"\r\n            type=\"number\"\r\n            step={1}\r\n            min={1}\r\n            max={200}\r\n            value={diceCount}\r\n            onChange={(event) =>\r\n              this.setState({ diceCount: event.target.value.replace(/\\D/, \"\") })\r\n            }\r\n          />\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <button\r\n            onClick={this.handleRoll}\r\n            className=\"btn btn-primary form-control mt-1 col-md-3\"\r\n          >\r\n            Roll\r\n          </button>\r\n          <label className=\"mr-3 mb-2 radio control-label col-md-8\">\r\n            Roll Result Sum:{\" \"}\r\n            <span className=\"rollResult\" hidden={resultSum ? false : true}>\r\n              {resultSum}\r\n            </span>\r\n          </label>\r\n        </li>\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DiceRoller;\r\n","import React, { Component } from \"react\";\r\nimport \"./mapCell.css\";\r\n\r\nclass MapCell extends Component {\r\n  getCellStyle() {\r\n    const { borderWidth, cell, cursorHover, cellSize } = this.props;\r\n    let border = \"solid black \";\r\n    border += borderWidth + \"px\";\r\n    let background = \"rgba(0, 0, 0, \";\r\n    background += cell.wall ? \"0.4)\" : \"0)\";\r\n    return {\r\n      width: cellSize,\r\n      height: cellSize,\r\n      border,\r\n      background,\r\n      cursor: cursorHover\r\n    };\r\n  }\r\n\r\n  render() {\r\n    if (this.props.selected) {\r\n    }\r\n    const { onClick, cell, onMouseEnterCell } = this.props;\r\n    return (\r\n      <div\r\n        className=\"CellStyle\"\r\n        style={this.getCellStyle()}\r\n        onClick={() => onClick(cell)}\r\n        onMouseEnter={() => onMouseEnterCell(cell)}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default MapCell;\r\n","import React, { Component } from \"react\";\r\n\r\nclass Character extends Component {\r\n  getStyle() {\r\n    const {\r\n      selected,\r\n      position,\r\n      borderWidth,\r\n      transparent,\r\n      itemDeletionModeOn,\r\n      clickable,\r\n    } = this.props;\r\n    let borderStyle = selected || itemDeletionModeOn ? \"solid red\" : \"none\";\r\n    borderStyle += \" \" + borderWidth + \"px\";\r\n    const opacity = transparent ? 0.45 : 1;\r\n    return {\r\n      width: position.width,\r\n      height: position.height,\r\n      position: \"absolute\",\r\n      top: position.topLeft.row,\r\n      left: position.topLeft.col,\r\n      border: borderStyle,\r\n      cursor: clickable ? \"pointer\" : \"move\",\r\n      opacity,\r\n      pointerEvents: clickable ? \"auto\" : \"none\",\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { character, onClick } = this.props;\r\n    if (!character) {\r\n      return \"\";\r\n    }\r\n    const { image } = this.props.character;\r\n    const imageSrc = image.url ? image.url : image.file;\r\n\r\n    return (\r\n      <img\r\n        src={imageSrc}\r\n        alt={character.name}\r\n        style={this.getStyle()}\r\n        onClick={() => onClick(character)}\r\n        title={character.name}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Character;\r\n","import React, { Component } from \"react\";\r\n\r\nclass SpellCircle extends Component {\r\n  getStyle() {\r\n    const {\r\n      position,\r\n      itemDeletionModeOn,\r\n      borderWidth,\r\n      clickable,\r\n      selected,\r\n    } = this.props;\r\n    const { color } = this.props.spellCircle;\r\n    const transparentColor =\r\n      \"rgb(\" + color.r + \", \" + color.g + \", \" + color.b + \", 0.5) \";\r\n    let borderStyle = null;\r\n    if (itemDeletionModeOn || selected) {\r\n      borderStyle = \"solid rgb(255, 0, 0, 1) \" + (borderWidth + 1) + \"px\";\r\n    }\r\n    return {\r\n      position: \"absolute\",\r\n      top: position.row,\r\n      left: position.col,\r\n      height: position.radius * 2,\r\n      width: position.radius * 2,\r\n      background: transparentColor,\r\n      borderRadius: position.radius,\r\n      cursor: clickable ? \"pointer\" : \"move\",\r\n      border: borderStyle,\r\n      pointerEvents: clickable ? \"auto\" : \"none\",\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { spellCircle, onClick } = this.props;\r\n    if (!spellCircle) {\r\n      return \"\";\r\n    }\r\n\r\n    return (\r\n      <div\r\n        style={this.getStyle()}\r\n        onClick={() => onClick(spellCircle)}\r\n        title={\r\n          spellCircle.name +\r\n          (spellCircle.owner ? \". Owner: \" + spellCircle.owner : null)\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default SpellCircle;\r\n","import React, { Component } from \"react\";\r\nimport MapCell from \"./mapCell\";\r\nimport Character from \"./character\";\r\nimport SpellCircle from \"./spellCircle\";\r\nimport \"./boardMap.css\";\r\n\r\nclass BoardMap extends Component {\r\n  getBackgroundClass() {\r\n    return this.props.itemDeletionModeOn ? \"DeletionMode\" : \"\";\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      matrix,\r\n      selectedChar,\r\n      characters,\r\n      selectedCircle,\r\n      spellCircles,\r\n      cellSize,\r\n      borderWidth,\r\n      onCellClick,\r\n      onCharClick,\r\n      onCalcCharPosition,\r\n      onMouseEnterCell,\r\n      placingChar,\r\n      itemDeletionModeOn,\r\n      onSpellCircleClick,\r\n      onCalcSpellCirclePosition,\r\n      placingCircle\r\n    } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          {matrix.map((row, i) => (\r\n            <div key={i}>\r\n              {row.map((cell, j) => (\r\n                <MapCell\r\n                  key={j}\r\n                  cell={cell}\r\n                  cellSize={cellSize}\r\n                  onClick={onCellClick}\r\n                  borderWidth={borderWidth}\r\n                  cursorHover={\r\n                    placingCircle || placingChar ? \"pointer\" : \"move\"\r\n                  }\r\n                  onMouseEnterCell={onMouseEnterCell}\r\n                />\r\n              ))}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className={this.getBackgroundClass()}>\r\n          {spellCircles.map((spellCircle, i) => (\r\n            <SpellCircle\r\n              key={i}\r\n              spellCircle={spellCircle}\r\n              borderWidth={borderWidth}\r\n              position={onCalcSpellCirclePosition(spellCircle)}\r\n              onClick={onSpellCircleClick}\r\n              itemDeletionModeOn={itemDeletionModeOn}\r\n              placingCircle={placingCircle}\r\n              clickable={\r\n                (!placingChar && !placingCircle && !itemDeletionModeOn) ||\r\n                itemDeletionModeOn\r\n              }\r\n              selected={selectedCircle === spellCircle}\r\n            />\r\n          ))}\r\n          {placingCircle ? (\r\n            <SpellCircle\r\n              spellCircle={placingCircle}\r\n              borderWidth={borderWidth}\r\n              position={onCalcSpellCirclePosition(placingCircle)}\r\n              onClick={onSpellCircleClick}\r\n              itemDeletionModeOn={itemDeletionModeOn}\r\n              placingCircle={placingCircle}\r\n              clickable={false}\r\n              selected={false}\r\n            />\r\n          ) : null}\r\n          {characters.map((char, i) => (\r\n            <Character\r\n              key={i}\r\n              character={char}\r\n              selected={selectedChar === char}\r\n              position={onCalcCharPosition(char)}\r\n              onClick={onCharClick}\r\n              borderWidth={borderWidth}\r\n              transparent={placingChar === char}\r\n              itemDeletionModeOn={itemDeletionModeOn}\r\n              clickable={\r\n                (!placingChar && !placingCircle && !itemDeletionModeOn) ||\r\n                itemDeletionModeOn\r\n              }\r\n            />\r\n          ))}\r\n          {placingChar ? (\r\n            <Character\r\n              character={placingChar}\r\n              selected={false}\r\n              position={onCalcCharPosition(placingChar)}\r\n              onClick={onCharClick}\r\n              borderWidth={borderWidth}\r\n              transparent={true}\r\n              itemDeletionModeOn={itemDeletionModeOn}\r\n              clickable={false}\r\n            />\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BoardMap;\r\n","import React, { Component } from \"react\";\r\nimport { MapInteractionCSS } from \"react-map-interaction\";\r\nimport \"./mapCanvas.css\";\r\nimport BoardMap from \"./boardMap\";\r\n\r\nclass MapCanvas extends Component {\r\n  state = {};\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      scale: 2,\r\n      translation: { x: 0, y: 0 },\r\n    };\r\n  }\r\n\r\n  getStyle() {\r\n    const { mapImage } = this.props;\r\n    const backgroundImage = mapImage.url\r\n      ? \"url(\" + mapImage.url + \")\"\r\n      : mapImage.file;\r\n    return {\r\n      mapBgImg: {\r\n        height: this.props.cellSize * this.props.rowCount,\r\n        width: this.props.cellSize * this.props.colCount,\r\n        backgroundImage,\r\n      },\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      rowCount,\r\n      colCount,\r\n      matrix,\r\n      cellSize,\r\n      borderWidth,\r\n      selectedChar,\r\n      characters,\r\n      onCellClick,\r\n      onCharClick,\r\n      onCalcCharPosition,\r\n      onMouseEnterCell,\r\n      placingChar,\r\n      itemDeletionModeOn,\r\n      spellCircles,\r\n      onSpellCircleClick,\r\n      onCalcSpellCirclePosition,\r\n      placingCircle,\r\n      selectedCircle,\r\n    } = this.props;\r\n    const { scale, translation } = this.state;\r\n\r\n    return (\r\n      <MapInteractionCSS\r\n        scale={scale}\r\n        translation={translation}\r\n        onChange={({ scale, translation }) =>\r\n          this.setState({ scale, translation })\r\n        }\r\n      >\r\n        <div className=\"MapBgImg\" style={this.getStyle().mapBgImg}>\r\n          <BoardMap\r\n            rowCount={rowCount}\r\n            colCount={colCount}\r\n            matrix={matrix}\r\n            cellSize={cellSize}\r\n            borderWidth={borderWidth}\r\n            selectedChar={selectedChar}\r\n            characters={characters}\r\n            selectedCircle={selectedCircle}\r\n            spellCircles={spellCircles}\r\n            onCellClick={onCellClick}\r\n            onCharClick={onCharClick}\r\n            onCalcCharPosition={onCalcCharPosition}\r\n            onMouseEnterCell={onMouseEnterCell}\r\n            placingChar={placingChar}\r\n            itemDeletionModeOn={itemDeletionModeOn}\r\n            onSpellCircleClick={onSpellCircleClick}\r\n            onCalcSpellCirclePosition={onCalcSpellCirclePosition}\r\n            placingCircle={placingCircle}\r\n          />\r\n        </div>\r\n      </MapInteractionCSS>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MapCanvas;\r\n","import React from \"react\";\r\n\r\nconst CHARACTER_IMAGES_PATH = process.env.PUBLIC_URL + \"/images/characters/\";\r\nconst MAP_IMAGES_PATH = process.env.PUBLIC_URL + \"/images/maps/\";\r\nconst MISC_IMAGES_PATH = process.env.PUBLIC_URL + \"/images/misc/\";\r\n\r\nexport const AVATAR_IMG_URLS = {\r\n  ranger: CHARACTER_IMAGES_PATH + \"ranger.png\",\r\n  rogue: CHARACTER_IMAGES_PATH + \"rogue.png\",\r\n  sorcerer: CHARACTER_IMAGES_PATH + \"sorcerer.png\",\r\n  warlock: CHARACTER_IMAGES_PATH + \"warlock.png\",\r\n  fighter: CHARACTER_IMAGES_PATH + \"fighter.png\",\r\n  scorbat: CHARACTER_IMAGES_PATH + \"scorbat.png\",\r\n  dragon: CHARACTER_IMAGES_PATH + \"dragon.png\",\r\n  beetle: CHARACTER_IMAGES_PATH + \"beetle.png\",\r\n  balrog: CHARACTER_IMAGES_PATH + \"balrog.png\",\r\n  alligator: CHARACTER_IMAGES_PATH + \"alligator.png\",\r\n};\r\n\r\nexport const GAMEPLAY_IMG_PATH = MISC_IMAGES_PATH + \"gameplay.png\";\r\nexport const DEFAULT_MAP_IMG_PATH = MAP_IMAGES_PATH + \"default.jpg\";\r\n\r\nexport const MIN_CHARACTER_SIZE_SQUARES = 1;\r\nexport const MAX_CHARACTER_SIZE_SQUARES = 6;\r\nexport const MIN_SPELL_CIRCLE_RADIUS_FEET = 5;\r\nexport const MAX_SPELL_CIRCLE_RADIUS_FEET = 60;\r\n\r\nexport const DefaultFallbackComponent = ({ componentStack, error }) => (\r\n  <div>\r\n    <p>\r\n      <strong>\r\n        Oops! An error occured! I guess I haven't done enough QA because I\r\n        really wanted to show you the project early! But hey, at least I caught\r\n        the error using a boundary :)\r\n      </strong>\r\n    </p>\r\n    <p>Here’s what I know about the error:</p>\r\n    <p>\r\n      <strong>Error:</strong> {error.toString()}\r\n    </p>\r\n    <p>\r\n      <strong>Stacktrace:</strong> {componentStack}\r\n    </p>\r\n  </div>\r\n);\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./sideBar.css\";\r\nimport ImagePicker from \"react-image-picker\";\r\nimport \"react-image-picker/dist/index.css\";\r\nimport {\r\n  AVATAR_IMG_URLS,\r\n  MIN_CHARACTER_SIZE_SQUARES,\r\n  MAX_CHARACTER_SIZE_SQUARES,\r\n} from \"../constants\";\r\n\r\nconst avatarsList = Object.values(AVATAR_IMG_URLS);\r\n\r\nclass CharacterCreator extends Component {\r\n  state = {\r\n    characterName: \"\",\r\n    height: 1,\r\n    width: 1,\r\n    avatarImage: null,\r\n    missingFields: false,\r\n  };\r\n\r\n  initiateState() {\r\n    this.setState({\r\n      characterName: \"\",\r\n      height: MIN_CHARACTER_SIZE_SQUARES,\r\n      width: MIN_CHARACTER_SIZE_SQUARES,\r\n      avatarImage: null,\r\n      //   type: null,\r\n      //   avatar: \"Choose File\"\r\n      missingFields: false,\r\n    });\r\n  }\r\n\r\n  onChangeSize(event, isHeight) {\r\n    let newVal = Number(event.target.value.replace(/\\D/, \"\"));\r\n    if (event.target.min > newVal || newVal > event.target.max) {\r\n      newVal = isHeight ? this.state.height : this.state.width;\r\n    }\r\n    isHeight\r\n      ? this.setState({ height: newVal })\r\n      : this.setState({ width: newVal });\r\n  }\r\n\r\n  onPickAvatar = (avatarImage) => {\r\n    this.setState({ avatarImage });\r\n  };\r\n\r\n  getFileName(path) {\r\n    return path.replace(/^.*[\\\\\\/]/, \"\");\r\n  }\r\n\r\n  handleCancelCreation = () => {\r\n    this.initiateState();\r\n    this.props.onCancel();\r\n  };\r\n\r\n  handleCreateButtonClick = () => {\r\n    const { characterName, height, width } = { ...this.state };\r\n    let { avatarImage } = { ...this.state };\r\n    if (!characterName || height <= 0 || width <= 0 || !avatarImage) {\r\n      this.setState({ missingFields: true });\r\n      return;\r\n    }\r\n    this.setState({ missingFields: false });\r\n    this.initiateState();\r\n    avatarImage = avatarImage.src;\r\n    this.props.onCreation({ characterName, height, width, avatarImage });\r\n  };\r\n\r\n  render() {\r\n    const { characterName, height, width, avatarFile } = this.state;\r\n    return (\r\n      <ul\r\n        className=\"nav nav-tabs flex-column bg-dark row w-100 p-20 MenuUl\"\r\n      >\r\n        <h4 className=\"mb-4\">\r\n          <span className=\"creatorHeader ml-2\">Add a New Character</span>\r\n        </h4>\r\n        <li className=\"nav-item\">\r\n          <input\r\n            className=\"input-group-sm form-control col-11 mb-3 ml-2\"\r\n            id=\"characterName\"\r\n            value={characterName}\r\n            placeholder=\"Character name\"\r\n            required\r\n            onChange={(event) =>\r\n              this.setState({ characterName: event.target.value })\r\n            }\r\n          />\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <span className=\"inline-form\">\r\n            <span className=\"form-group\">\r\n              <label className=\"col-4 d-inline\" htmlFor=\"width\">\r\n                Width in squares:{\" \"}\r\n              </label>\r\n              <input\r\n                className=\"input-group-sm form-control col-4 d-inline\"\r\n                style={{ maxWidth: \"254px\" }}\r\n                id=\"width\"\r\n                type=\"number\"\r\n                step={MIN_CHARACTER_SIZE_SQUARES}\r\n                min={MIN_CHARACTER_SIZE_SQUARES}\r\n                max={MAX_CHARACTER_SIZE_SQUARES}\r\n                value={width}\r\n                required\r\n                onChange={(event) => this.onChangeSize(event, false)}\r\n              />\r\n            </span>\r\n            <span className=\"form-group\">\r\n              <label className=\"ml-30 col-4 d-inline ml-1\" htmlFor=\"height\">\r\n                Height in squares:\r\n              </label>\r\n              <input\r\n                className=\"input-group-sm form-control col-4 d-inline\"\r\n                style={{ maxWidth: \"254px\" }}\r\n                id=\"height\"\r\n                type=\"number\"\r\n                step={MIN_CHARACTER_SIZE_SQUARES}\r\n                min={MIN_CHARACTER_SIZE_SQUARES}\r\n                max={MAX_CHARACTER_SIZE_SQUARES}\r\n                value={height}\r\n                required\r\n                onChange={(event) => this.onChangeSize(event, true)}\r\n              />\r\n            </span>\r\n          </span>\r\n        </li>\r\n        <li className=\"nav-item col\">\r\n          <span className=\"form-group\">\r\n            <label className=\"mr-3 mb-3\">Choose Avatar:</label>\r\n            <span>\r\n              <ImagePicker\r\n                images={avatarsList.map((avatar, i) => ({\r\n                  src: avatar,\r\n                  value: i,\r\n                }))}\r\n                onPick={this.onPickAvatar}\r\n              />\r\n            </span>\r\n          </span>\r\n        </li>\r\n        {/* <li className=\"nav-item col\">\r\n          <label className=\"mr-3 mb-2 radio control-label\">\r\n            Character type:\r\n          </label>\r\n          <span>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"player\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"CharType\"\r\n                value=\"Player\"\r\n                id=\"player\"\r\n                onChange={event => this.setState({ type: event.target.value })}\r\n              />\r\n              Player\r\n            </label>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"enemy\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"CharType\"\r\n                value=\"Enemy\"\r\n                id=\"enemy\"\r\n                onChange={event => this.setState({ type: event.target.value })}\r\n              />\r\n              Enemy\r\n            </label>\r\n            <label className=\"ml-1 mr-2 radio control-label\" htmlFor=\"ally\">\r\n              <input\r\n                className=\"radio m-1\"\r\n                type=\"radio\"\r\n                name=\"CharType\"\r\n                value=\"Ally\"\r\n                id=\"ally\"\r\n                onChange={event => this.setState({ type: event.target.value })}\r\n              />\r\n              Ally\r\n            </label>\r\n          </span>\r\n        </li>\r\n        <li className=\"nav-item col\">\r\n          <label className=\"mr-1\">Avatar: </label>\r\n          <div className=\"custom-file mb-2\">\r\n            <input\r\n              type=\"file\"\r\n              className=\"custom-file-input\"\r\n              id=\"inputGroupFile01\"\r\n              onChange={event => {\r\n                this.setState({ avatar: event.target.value });\r\n              }}\r\n            />\r\n            <label className=\"custom-file-label\">\r\n              {this.getFileName(avatar)}\r\n            </label>\r\n          </div>\r\n        </li> */}\r\n        <li className=\"nav-item\">\r\n          <span className=\"inline-form\">\r\n            <button\r\n              onClick={this.handleCreateButtonClick}\r\n              className=\"btn btn-primary form-control mt-3 col-8 d-inline ml-2\"\r\n            >\r\n              Create!\r\n            </button>\r\n            <button\r\n              onClick={this.handleCancelCreation}\r\n              className=\"btn btn-danger form-control ml-3 mt-3 col-3 d-inline\"\r\n            >\r\n              Cancel\r\n            </button>\r\n          </span>\r\n        </li>\r\n        {this.state.missingFields ? (\r\n          <li className=\"nav-item col\">\r\n            <h4>\r\n              <span className=\"badge badge-danger\">\r\n                Not all fields are filled/selected!\r\n              </span>\r\n            </h4>\r\n          </li>\r\n        ) : null}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CharacterCreator;\r\n","import React, { Component } from \"react\";\r\nimport CharacterCreator from \"./characterCreator\";\r\nimport \"./popUp.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nclass CharacterCreatorPopUp extends Component {\r\n  handleCharacterCreationClick = (stateData) => {\r\n    this.props.closePopup();\r\n    this.props.onCharacterCreation(stateData);\r\n  };\r\n\r\n  handleCancelCreation = () => {\r\n    this.props.closePopup();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"PopUp\">\r\n        <div className=\"CharacterCreatorPopUpInner\">\r\n          <CharacterCreator\r\n            onCreation={this.handleCharacterCreationClick}\r\n            onCancel={this.handleCancelCreation}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CharacterCreatorPopUp;\r\n","import React, { Component } from \"react\";\r\nimport \"./sideBar.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nclass ActionsMenu extends Component {\r\n  render() {\r\n    const {\r\n      onCharacterCreation,\r\n      onSpellCircleCreation,\r\n      onCharacterCircleDelete,\r\n      onGameSave,\r\n      enableDeletion,\r\n      itemDeletionModeOn,\r\n      onFinishDeletion,\r\n      onExitToMenu,\r\n    } = this.props;\r\n    return (\r\n      <ul\r\n        className=\"nav nav-tabs flex-column bg-dark row w-100 MenuUl\"\r\n      >\r\n        <h4 className=\"mb-3\">\r\n          <span className=\"creatorHeader\">Actions</span>\r\n        </h4>\r\n        {itemDeletionModeOn ? (\r\n          <li className=\"nav-item\">\r\n            <h5 className=\"mt-3\">Click items on the map to delete them</h5>\r\n            <button\r\n              onClick={onFinishDeletion}\r\n              className=\"btn btn-danger form-control mt-1\"\r\n            >\r\n              Finish Deletion\r\n            </button>\r\n          </li>\r\n        ) : (\r\n          <span>\r\n            <li className=\"nav-item\">\r\n              <button\r\n                onClick={onCharacterCreation}\r\n                className=\"btn btn-primary form-control mt-3\"\r\n              >\r\n                Create a New Character\r\n              </button>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <button\r\n                onClick={onSpellCircleCreation}\r\n                className=\"btn btn-primary form-control mt-3\"\r\n              >\r\n                Create a Spell Circle\r\n              </button>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <button\r\n                onClick={onCharacterCircleDelete}\r\n                className=\"btn btn-primary form-control mt-3\"\r\n                disabled={!enableDeletion}\r\n              >\r\n                Delete a Character / Circle\r\n              </button>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <button\r\n                onClick={onGameSave}\r\n                className=\"btn btn-primary form-control mt-3\"\r\n              >\r\n                Save the Game\r\n              </button>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <button\r\n                onClick={onExitToMenu}\r\n                className=\"btn btn-primary form-control mt-3\"\r\n              >\r\n                Exit to Menu\r\n              </button>\r\n            </li>\r\n          </span>\r\n        )}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ActionsMenu;\r\n","export const CallLoginAPI = (loginData) => {\r\n  return sendRequest(\"/auth/login/\", \"POST\", loginData);\r\n};\r\n\r\nexport const CallRegisterAPI = (userData) => {\r\n  return sendRequest(\"/auth/register/\", \"POST\", userData);\r\n};\r\n\r\nexport const CallResetPasswordSendAPI = (resetData) => {\r\n  return sendRequest(\"/auth/reset_password/send\", \"POST\", resetData);\r\n};\r\n\r\nexport const CallCheckPasswordTokenMatches = (authToken) => {\r\n  return sendRequest(\"/auth/user/\" + authToken, \"GET\");\r\n};\r\n\r\nexport const CallResetPasswordResetAPI = (resetData) => {\r\n  return sendRequest(\"/auth/reset_password/reset\", \"POST\", resetData);\r\n};\r\n\r\nexport const CallEraseGameDataAPI = (authToken) => {\r\n  return sendRequest(\"/gameData/delete\", \"DELETE\", undefined, authToken);\r\n};\r\n\r\nexport const CallGetGameDataAPI = (authToken) => {\r\n  return sendRequest(\"/gameData\", \"GET\", undefined, authToken);\r\n};\r\n\r\nexport const CallSaveNewGameDataAPI = (gameState, authToken) => {\r\n  return sendRequest(\"/gameData\", \"POST\", gameState, authToken);\r\n};\r\n\r\nexport const CallUpdateGameDataAPI = (gameState, authToken) => {\r\n  return sendRequest(\"/gameData\", \"PATCH\", gameState, authToken);\r\n};\r\n\r\nexport const API_URL_DEV = \"http://localhost:9000\";\r\nexport const API_URL = \"dnd-online-board.herokuapp.com\";\r\n\r\nconst createRequest = (method, bodyObject) => {\r\n  return {\r\n    method: method,\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(bodyObject),\r\n  };\r\n};\r\n\r\nconst sendRequest = async (\r\n  urlEnd,\r\n  method,\r\n  bodyObject = undefined,\r\n  authToken = null\r\n) => {\r\n  const url = API_URL + urlEnd;\r\n  const req = createRequest(method, bodyObject);\r\n  if (authToken) {\r\n    req.headers[\"auth-token\"] = authToken;\r\n  }\r\n  console.debug(\"sending: \", req, url);\r\n  try {\r\n    const res = await fetch(url, req);\r\n    console.log(\"result:\", res);\r\n    const data = await res.json();\r\n    console.debug(\"response: \", { status: res.status, body: data });\r\n    return { status: res.status, body: data };\r\n  } catch (err) {\r\n    console.error(\r\n      \"Error with request \" + method + \" to url \" + url,\r\n      \"body:\",\r\n      bodyObject,\r\n      err.message,\r\n      err.stack ? err.stack : null\r\n    );\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./sideBar.css\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport {\r\n  MIN_SPELL_CIRCLE_RADIUS_FEET,\r\n  MAX_SPELL_CIRCLE_RADIUS_FEET,\r\n} from \"../constants\";\r\n\r\nclass CharacterCreator extends Component {\r\n  state = {\r\n    spellName: \"\",\r\n    ownerName: \"\",\r\n    radius: MIN_SPELL_CIRCLE_RADIUS_FEET,\r\n    color: {\r\n      r: \"241\",\r\n      g: \"112\",\r\n      b: \"19\",\r\n      a: \"1\",\r\n    },\r\n    missingFields: false,\r\n    isRadiusValid: true,\r\n  };\r\n\r\n  initiateState() {\r\n    this.setState({\r\n      spellName: \"\",\r\n      ownerName: \"\",\r\n      radius: MIN_SPELL_CIRCLE_RADIUS_FEET,\r\n      color: {\r\n        r: \"241\",\r\n        g: \"112\",\r\n        b: \"19\",\r\n        a: \"1\",\r\n      },\r\n      missingFields: false,\r\n      isRadiusValid: true,\r\n    });\r\n  }\r\n\r\n  onChangeRadius(event) {\r\n    let newRadiusVal = Number(event.target.value.replace(/\\D/, \"\"));\r\n    this.setState({ radius: newRadiusVal });\r\n  }\r\n\r\n  handleCancelCreation = () => {\r\n    this.initiateState();\r\n    this.props.onCancel();\r\n  };\r\n\r\n  handleCreateButtonClick = () => {\r\n    const { spellName, ownerName, radius, color } = { ...this.state };\r\n    this.setState({ isRadiusValid: true, missingFields: false }); // initialize errors\r\n    if (!spellName || !color) {\r\n      this.setState({ missingFields: true });\r\n    } else if (\r\n      MIN_SPELL_CIRCLE_RADIUS_FEET > radius ||\r\n      radius > MAX_SPELL_CIRCLE_RADIUS_FEET\r\n    ) {\r\n      this.setState({ isRadiusValid: false });\r\n    } else {\r\n      // form is valid\r\n      this.initiateState(); // Prepare for next circle creation\r\n      this.props.onCreation({ spellName, ownerName, radius, color });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      spellName,\r\n      ownerName,\r\n      radius,\r\n      color,\r\n      isRadiusValid,\r\n      missingFields,\r\n    } = this.state;\r\n    return (\r\n      <ul className=\"nav nav-tabs flex-column bg-dark row w-100 MenuUl p-20\">\r\n        <h4 className=\"col mb-5\">\r\n          <span className=\"creatorHeader\">Add a Spell Circle</span>\r\n        </h4>\r\n        <span className=\"row\">\r\n          <span className=\"col-8 d-inline\">\r\n            <li className=\"nav-item\">\r\n              <input\r\n                className=\"input-group-sm form-control col\"\r\n                id=\"spellName\"\r\n                value={spellName}\r\n                placeholder=\"Spell name\"\r\n                required\r\n                onChange={(event) =>\r\n                  this.setState({ spellName: event.target.value })\r\n                }\r\n              />\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <input\r\n                className=\"input-group-sm form-control col mt-3\"\r\n                id=\"ownerName\"\r\n                value={ownerName}\r\n                placeholder=\"Owner name (optional)\"\r\n                onChange={(event) =>\r\n                  this.setState({ ownerName: event.target.value })\r\n                }\r\n              />\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <label className=\"col align-text-bottom mt-3\">\r\n                Radius in feet (a square is 5 feet wide):\r\n              </label>\r\n              <input\r\n                className=\"input-group-sm form-control col\"\r\n                id=\"radius\"\r\n                type=\"number\"\r\n                step={MIN_SPELL_CIRCLE_RADIUS_FEET}\r\n                min={MIN_SPELL_CIRCLE_RADIUS_FEET}\r\n                max={MAX_SPELL_CIRCLE_RADIUS_FEET}\r\n                value={radius}\r\n                required\r\n                onChange={(event) => this.onChangeRadius(event, false)}\r\n              />\r\n            </li>\r\n          </span>\r\n          <li className=\"nav-item col-3 d-inline\">\r\n            <label>Choose color for the circle:</label>\r\n            <SketchPicker\r\n              color={color}\r\n              onChange={(color) => this.setState({ color: color.rgb })}\r\n            />\r\n          </li>\r\n        </span>\r\n        <li className=\"nav-item\">\r\n          <button\r\n            onClick={this.handleCreateButtonClick}\r\n            className=\"btn btn-primary form-control ml-3 mt-3 col-md-8 d-inline\"\r\n          >\r\n            Create!\r\n          </button>\r\n          <button\r\n            onClick={this.handleCancelCreation}\r\n            className=\"btn btn-danger form-control ml-4 mt-3 col-md-3 d-inline\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </li>\r\n        {missingFields ? (\r\n          <li className=\"nav-item col\">\r\n            <h4>\r\n              <span className=\"badge badge-danger\">\r\n                Not all fields are filled/selected!\r\n              </span>\r\n            </h4>\r\n          </li>\r\n        ) : null}\r\n        {isRadiusValid ? null : (\r\n          <li className=\"nav-item col\">\r\n            <h4>\r\n              <span className=\"badge badge-danger\">\r\n                Radius value should be {MIN_SPELL_CIRCLE_RADIUS_FEET}-\r\n                {MAX_SPELL_CIRCLE_RADIUS_FEET}\r\n              </span>\r\n            </h4>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CharacterCreator;\r\n","import React, { Component } from \"react\";\r\nimport SpellCircleCreator from \"./spellCircleCreator\";\r\nimport \"./popUp.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nclass SpellCircleCreatorPopUp extends Component {\r\n  handleSpellCircleCreationClick = (stateData) => {\r\n    this.props.closePopup();\r\n    this.props.onSpellCircleCreation(stateData);\r\n  };\r\n\r\n  handleCancelCreation = () => {\r\n    this.props.closePopup();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"PopUp\">\r\n        <div className=\"SpellCircleCreatorPopUpInner\">\r\n          <SpellCircleCreator\r\n            onCreation={this.handleSpellCircleCreationClick}\r\n            onCancel={this.handleCancelCreation}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SpellCircleCreatorPopUp;\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { CallLoginAPI } from \"../apiUtils\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\n\r\nclass LoginForm extends Component {\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n    errorMessage: \"\",\r\n    toGameMenu: false,\r\n  };\r\n\r\n  handleLoginFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { email, password } = this.state;\r\n    const { onLogin } = this.props;\r\n    const promise = CallLoginAPI({ email, password });\r\n\r\n    promise.then((res) => {\r\n      if (!res) return;\r\n      if (res.status !== 200) {\r\n        this.setState({ errorMessage: res.body.error.message });\r\n      } else {\r\n        this.setState({ toGameMenu: true });\r\n        onLogin(res.body.userName, res.body.authToken);\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { email, password, errorMessage, toGameMenu } = this.state;\r\n\r\n    if (toGameMenu) {\r\n      return <Redirect to=\"/home/game_menu\" />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"HomeBgContent\">\r\n        <form onSubmit={this.handleLoginFormSubmit}>\r\n          <ul className=\"MenuUl bg-dark w-100\">\r\n            <h4 className=\"mb-4\">\r\n              <span className=\"creatorHeader\">\r\n                Welcome to D&amp;D Online Map\r\n              </span>\r\n            </h4>\r\n            <li className=\"mb-3\">\r\n              <Link to=\"/home/about\">\r\n                <h5>What is D&amp;D Online Map?</h5>\r\n              </Link>\r\n            </li>\r\n            <li>\r\n              <input\r\n                className=\"input-group-sm form-control\"\r\n                id=\"email\"\r\n                value={email}\r\n                placeholder=\"Email Address\"\r\n                required\r\n                onChange={(event) =>\r\n                  this.setState({ email: event.target.value })\r\n                }\r\n              />\r\n            </li>\r\n            <li>\r\n              <input\r\n                className=\"input-group-sm form-control mt-3\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                value={password}\r\n                placeholder=\"Password\"\r\n                required\r\n                onChange={(event) =>\r\n                  this.setState({ password: event.target.value })\r\n                }\r\n              />\r\n            </li>\r\n            <li>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary form-control mt-3\"\r\n              >\r\n                Log In\r\n              </button>\r\n            </li>\r\n            <li className=\"mt-2\">\r\n              <Link to=\"/home/register\">New user?</Link>\r\n              <Link className=\"float-right\" to=\"/home/forgot_password\">\r\n                Forgot password?\r\n              </Link>\r\n            </li>\r\n            {errorMessage ? (\r\n              <li>\r\n                <h4>\r\n                  <span className=\"badge badge-danger\">{errorMessage}</span>\r\n                </h4>\r\n              </li>\r\n            ) : null}\r\n          </ul>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React, { Component, Fragment } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { CallGetGameDataAPI } from \"../apiUtils\";\r\nimport \"./home.css\";\r\n\r\nlet _gameMenuMounted = false;\r\n\r\nclass GameMenu extends Component {\r\n  state = {\r\n    toLogin: false,\r\n    toMap: false,\r\n    gameDataExists: false,\r\n    continueGameText: \"\",\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.props.cancelRedirectFromMap(); // We only want to redirect once from map, without unmounting map compponent (this allows back button press)\r\n  }\r\n\r\n  componentDidMount() {\r\n    _gameMenuMounted = true;\r\n    this.checkForExistingGameData(this.props.authToken);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    _gameMenuMounted = false;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (_gameMenuMounted) {\r\n      if (this.props.authToken !== nextProps.authToken) {\r\n        this.checkForExistingGameData(nextProps.authToken);\r\n      }\r\n    }\r\n  }\r\n\r\n  checkForExistingGameData(authToken) {\r\n    this.setState({ continueGameText: \"Collecting game data from server...\" });\r\n    const promise = CallGetGameDataAPI(authToken);\r\n    promise.then((res) => {\r\n      if (!res || !_gameMenuMounted) return;\r\n      if (res.status !== 200) {\r\n        this.setState({\r\n          continueGameText: \"No Saved Game\",\r\n        });\r\n      } else {\r\n        this.setState({\r\n          gameDataExists: true,\r\n          continueGameText: \"Continue Last Saved Game\",\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  handleLogOutClick = () => {\r\n    this.setState({ toLogin: true });\r\n    this.props.onLogOut();\r\n  };\r\n\r\n  handleStartNewGameButtonClick = () => {\r\n    if (this.state.gameDataExists) {\r\n      this.setState({ showWarning: true });\r\n    } else {\r\n      this.beginNewGame();\r\n    }\r\n  };\r\n\r\n  beginNewGame = () => {\r\n    this.setState({ toMap: true });\r\n    this.props.onStartANewGame();\r\n  };\r\n\r\n  handleContinueGameClick = () => {\r\n    this.setState({ toMap: true });\r\n    this.props.onContinueSavedGame();\r\n  };\r\n\r\n  renderGameMenu() {\r\n    const { userName } = this.props;\r\n    const { showWarning, gameDataExists, continueGameText } = this.state;\r\n    return (\r\n      <Fragment>\r\n        <h4 className=\"mb-4\">\r\n          <span className=\"creatorHeader\">Hi, {userName}! Ready to play?</span>\r\n        </h4>\r\n        <li>\r\n          <button\r\n            onClick={this.handleContinueGameClick}\r\n            className=\"btn btn-primary form-control mt-3\"\r\n            disabled={!gameDataExists}\r\n          >\r\n            {continueGameText}\r\n          </button>\r\n        </li>\r\n        <li>\r\n          <button\r\n            onClick={this.handleStartNewGameButtonClick}\r\n            className=\"btn btn-primary form-control mt-3\"\r\n          >\r\n            Start a New Game\r\n          </button>\r\n        </li>\r\n        <li className=\"mt-2 mb-3\">\r\n          <a className=\"float-right\" href=\"#\" onClick={this.handleLogOutClick}>\r\n            Log Out\r\n          </a>\r\n        </li>\r\n        {showWarning ? (\r\n          <span>\r\n            <li className=\"mt-2\">\r\n              <h6>\r\n                Starting a new game will erase the last saved game, continue?\r\n              </h6>\r\n            </li>\r\n            <span className=\"inline-form row\">\r\n              <button\r\n                onClick={this.beginNewGame}\r\n                className=\"btn btn-danger form-control ml-3 mt-3 col-7 d-inline\"\r\n              >\r\n                Yes - Delete my saved game\r\n              </button>\r\n              <button\r\n                onClick={() => this.setState({ showWarning: false })}\r\n                className=\"btn btn-primary form-control ml-2 mt-3 col-4 d-inline\"\r\n              >\r\n                No - Keep my saved game\r\n              </button>\r\n            </span>\r\n          </span>\r\n        ) : null}\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderNotLoggedInError() {\r\n    return (\r\n      <Fragment>\r\n        <h4 className=\"mb-4\">\r\n          <span className=\"creatorHeader\">Hey... unknown user!</span>\r\n          <br></br>\r\n          <br></br>\r\n          Oops! You can't see the game menu if you're not logged in :) <br></br>\r\n          Please log in to play.\r\n        </h4>\r\n        <Link to=\"/home/login\">Login Here</Link>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { authToken } = this.props;\r\n    const { toLogin, toMap } = this.state;\r\n\r\n    if (toLogin) {\r\n      return <Redirect push to=\"/home/login\" />;\r\n    } else if (toMap) {\r\n      return <Redirect push to=\"/map\" />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"HomeBgContent\">\r\n        <ul className=\"MenuUl bg-dark w-100\">\r\n          {authToken ? this.renderGameMenu() : this.renderNotLoggedInError()}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameMenu;\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { CallResetPasswordSendAPI } from \"../apiUtils\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass ForgotPasswordForm extends Component {\r\n  state = {\r\n    email: \"\",\r\n    errMessage: \"\",\r\n    messageUnderBox:\r\n      \"A message with a link to reset your password will be sent to this email address.\",\r\n  };\r\n\r\n  callResetPasswordSendAPI(email) {\r\n    const promise = CallResetPasswordSendAPI({ email: email });\r\n    promise.then((res) => {\r\n      if (!res) return;\r\n      if (res.status !== 200) {\r\n        this.setState({\r\n          errMessage: res.body.error.message,\r\n          messageUnderBox: \"An error has occured\",\r\n        });\r\n      } else {\r\n        this.setState({\r\n          emailSent: true,\r\n          messageUnderBox: \"Reset message sent to email address!\",\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  handleSendButtonClick = () => {\r\n    const { email } = this.state;\r\n    this.setState({ messageUnderBox: \"Please wait...\" });\r\n    this.callResetPasswordSendAPI(email);\r\n  };\r\n\r\n  render() {\r\n    const { email, errMessage, messageUnderBox } = this.state;\r\n    return (\r\n      <div className=\"HomeBgContent\">\r\n        <ul className=\"MenuUl bg-dark w-100\">\r\n          <h4 className=\"mb-5\">\r\n            <span className=\"creatorHeader\">Reset Password</span>\r\n          </h4>\r\n          <li>\r\n            <input\r\n              className=\"input-group-sm form-control\"\r\n              id=\"email\"\r\n              value={email}\r\n              placeholder=\"Email Address\"\r\n              required\r\n              onChange={(event) => this.setState({ email: event.target.value })}\r\n            />\r\n          </li>\r\n          <li>\r\n            <label>{messageUnderBox}</label>\r\n          </li>\r\n          <li>\r\n            <button\r\n              onClick={this.handleSendButtonClick}\r\n              className=\"btn btn-primary form-control mt-3\"\r\n            >\r\n              Send\r\n            </button>\r\n          </li>\r\n          <li className=\"mt-2 mb-4\">\r\n            <Link className=\"float-right\" to=\"/home/login\">\r\n              Back to log in\r\n            </Link>\r\n          </li>\r\n          {errMessage ? (\r\n            <li>\r\n              <h4>\r\n                <span className=\"badge badge-danger\">{errMessage}</span>\r\n              </h4>\r\n            </li>\r\n          ) : null}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ForgotPasswordForm;\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { CallRegisterAPI } from \"../apiUtils\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\n\r\nclass RegistrationForm extends Component {\r\n  state = {\r\n    userName: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    errorMessage: \"\",\r\n    toLogin: false,\r\n  };\r\n\r\n  handleRegisterFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { userName, email, password } = this.state;\r\n    const { onRegistered } = this.props;\r\n    const promise = CallRegisterAPI({ userName, email, password });\r\n\r\n    promise.then((res) => {\r\n      if (!res) return;\r\n      if (res.status !== 200) {\r\n        this.setState({ errorMessage: res.body.error.message });\r\n      } else {\r\n        this.setState({ toLogin: true });\r\n        onRegistered();\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { userName, email, password, errorMessage, toLogin } = this.state;\r\n\r\n    if (toLogin) {\r\n      return <Redirect push to=\"/home/login\" />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"HomeBgContent\">\r\n        <form onSubmit={this.handleRegisterFormSubmit}>\r\n          <ul className=\"MenuUl bg-dark w-100\">\r\n            <h4 className=\"mb-5\">\r\n              <span className=\"creatorHeader\">New User Registration</span>\r\n            </h4>\r\n            <li>\r\n              <input\r\n                className=\"input-group-sm form-control\"\r\n                id=\"userName\"\r\n                value={userName}\r\n                placeholder=\"User Name\"\r\n                required\r\n                onChange={(event) =>\r\n                  this.setState({ userName: event.target.value })\r\n                }\r\n              />\r\n            </li>\r\n            <li>\r\n              <input\r\n                className=\"input-group-sm form-control mt-3\"\r\n                id=\"email\"\r\n                value={email}\r\n                placeholder=\"Email Address\"\r\n                required\r\n                onChange={(event) =>\r\n                  this.setState({ email: event.target.value })\r\n                }\r\n              />\r\n            </li>\r\n            <li>\r\n              <input\r\n                className=\"input-group-sm form-control mt-3\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                value={password}\r\n                placeholder=\"Password\"\r\n                required\r\n                onChange={(event) =>\r\n                  this.setState({ password: event.target.value })\r\n                }\r\n              />\r\n            </li>\r\n            <li>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary form-control mt-3\"\r\n              >\r\n                Register\r\n              </button>\r\n            </li>\r\n            <li className=\"mt-2 mb-4\">\r\n              <Link className=\"float-right\" to=\"/home/login\">\r\n                Already registered? log in\r\n              </Link>\r\n            </li>\r\n            {errorMessage ? (\r\n              <li>\r\n                <h4>\r\n                  <span className=\"badge badge-danger\">{errorMessage}</span>\r\n                </h4>\r\n              </li>\r\n            ) : null}\r\n          </ul>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RegistrationForm;\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { GAMEPLAY_IMG_PATH } from \"../constants\";\r\n\r\nclass AboutPage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"AboutScreenContent\">\r\n        <ul className=\"MenuUl bg-dark w-100\">\r\n          <h4 className=\"mb-5\">\r\n            <span className=\"creatorHeader\">What is D&amp;D Online Map?</span>\r\n          </h4>\r\n          <p>\r\n            <h4>What is D&amp;D?</h4>\r\n            <label>\r\n              D&amp;D stands for Dungeons &amp; Dragons. It's a fantasy tabletop\r\n              role-playing game (RPG) in which every participant plays a\r\n              character. Characters can do anything a real life person can do\r\n              and more - they can talk, walk, jump, fight each other or fight\r\n              monsters, etc. It's all done by explicitly saying what the\r\n              character does. One of the participants plays a \"game master\" and\r\n              decides, according to traditional methods, which actions succeed\r\n              and which fail.\r\n            </label>\r\n          </p>\r\n          <p>\r\n            <h4>What is a D&amp;D Map?</h4>\r\n            <label>\r\n              When a fight happens, there's a strict system that determines\r\n              which character goes first, how far it can walk in one turn, and\r\n              if the actions succeed. This is done with the help of a map in\r\n              which every square is 5 feet long, and different types of dice to\r\n              determine which attacks succeed and how much damage is done.\r\n              Usually the map is a physical board with character miniatures as\r\n              pawns, and the participants meet together to play.\r\n            </label>\r\n          </p>\r\n          <div className=\"row\">\r\n            <p className=\"col-6\">\r\n              <h4>What can I do in D&amp;D Online Map?</h4>\r\n              <label>\r\n                Instead of driving and physically meeting, you can play online\r\n                with your friends. Just connect to an online conversation app,\r\n                and use our online map site to view the same world and take\r\n                character actions.\r\n              </label>\r\n              <ul className=\"pl-3 mt-2\">\r\n                <h5 className=\"font-weight-bold\">The game includes:</h5>\r\n                <li>\r\n                  Chacacters and monsters that can be placed and move on the\r\n                  board.\r\n                </li>\r\n                <li>\r\n                  Spell effect circular areas that can be placed and move on the\r\n                  board.\r\n                </li>\r\n                <li>\r\n                  All dice types virtual roll available on the side-bar during\r\n                  the game.\r\n                </li>\r\n                <li>\r\n                  You can save your current progress and continue to play\r\n                  another day.\r\n                </li>\r\n                <br></br>\r\n                <Link to=\"/home/register\">\r\n                  <h4>This sounds so cool! I want to play!</h4>\r\n                </Link>\r\n              </ul>\r\n            </p>\r\n            <div className=\"col-6\">\r\n              <img\r\n                src={GAMEPLAY_IMG_PATH}\r\n                alt=\"gameplay\"\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: \"auto\",\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AboutPage;\r\n","import React, { Component } from \"react\";\r\nimport \"./home.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport LoginForm from \"./loginForm\";\r\nimport GameMenu from \"./gameMenu\";\r\nimport ForgotPasswordForm from \"./forgotPasswordForm\";\r\nimport RegistrationForm from \"./registrationForm\";\r\nimport AboutPage from \"./aboutPage\";\r\nimport { Route, Redirect, Switch } from \"react-router-dom\";\r\n\r\nclass WelcomeScreen extends Component {\r\n  render() {\r\n    const {\r\n      onNewGame,\r\n      onContinueSavedGame,\r\n      authToken,\r\n      userName,\r\n      onRegisteredNewUser,\r\n      onLogOut,\r\n      cancelRedirectFromMap,\r\n      onLogIn,\r\n    } = this.props;\r\n\r\n    return (\r\n      <div className=\"HomeBg\">\r\n        <Switch>\r\n          <Redirect\r\n            exact\r\n            from=\"/home\"\r\n            to={authToken ? \"/home/game_menu\" : \"/home/login\"}\r\n          />\r\n          <Route path=\"/home/game_menu\">\r\n            <GameMenu\r\n              onContinueSavedGame={onContinueSavedGame}\r\n              onStartANewGame={onNewGame}\r\n              onLogOut={onLogOut}\r\n              userName={userName}\r\n              authToken={authToken}\r\n              cancelRedirectFromMap={cancelRedirectFromMap}\r\n            />\r\n          </Route>\r\n          <Route path=\"/home/forgot_password\">\r\n            <ForgotPasswordForm />\r\n          </Route>\r\n          <Route path=\"/home/about\">\r\n            <AboutPage />\r\n          </Route>\r\n          <Route path=\"/home/register\">\r\n            <RegistrationForm onRegistered={onRegisteredNewUser} />\r\n          </Route>\r\n          <Route path=\"/home/login\">\r\n            <LoginForm onLogin={onLogIn} />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WelcomeScreen;\r\n","import React, { Component } from \"react\";\r\nimport \"./popUp.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nclass TempMessage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"PopUp\">\r\n        <div className=\"TempMessageInner\">\r\n          <div className=\"text-white\" style={{ textAlignLast: \"center\" }}>\r\n            <h2>{this.props.message}</h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TempMessage;\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport {\r\n  CallResetPasswordResetAPI,\r\n  CallCheckPasswordTokenMatches,\r\n} from \"../apiUtils\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport \"./home.css\";\r\n\r\nclass ResetPasswordForm extends Component {\r\n  state = {\r\n    newPassword: \"\",\r\n    confirmPassword: \"\",\r\n    errorMessage: \"\",\r\n    authToken: null,\r\n    tokenValid: false,\r\n    isLoading: true,\r\n    toLogin: false,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.authToken = this.getAuthTokenFromParams();\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.authToken) {\r\n      this.isTokenMatchesUSer();\r\n    }\r\n  }\r\n\r\n  getAuthTokenFromParams() {\r\n    const hrefParts = window.location.href.split(\"/\");\r\n    const authToken = hrefParts[hrefParts.length - 1];\r\n    return authToken;\r\n  }\r\n\r\n  isTokenMatchesUSer() {\r\n    const promise = CallCheckPasswordTokenMatches(this.state.authToken);\r\n    promise.then((res) => {\r\n      if (!res) return;\r\n      if (res.status !== 200) {\r\n        this.setState({\r\n          errorMessage: res.body.error.message,\r\n          isLoading: false,\r\n        });\r\n      } else {\r\n        this.setState({ tokenValid: true, isLoading: false });\r\n      }\r\n    });\r\n  }\r\n\r\n  handleChangePasswordFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { newPassword, confirmPassword, authToken } = this.state;\r\n    const { onPasswordReset } = this.props;\r\n\r\n    if (!newPassword || !confirmPassword) {\r\n      this.setState({ errorMessage: \"Please fill both of the above fields\" });\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      this.setState({ errorMessage: \"Passwords must match\" });\r\n      return;\r\n    }\r\n\r\n    const promise = CallResetPasswordResetAPI({\r\n      newPassword,\r\n      authToken,\r\n    });\r\n\r\n    promise.then((res) => {\r\n      if (!res) return;\r\n      if (res.status !== 200) {\r\n        this.setState({ errorMessage: res.body.error.message });\r\n      } else {\r\n        this.setState({ toLogin: true });\r\n        onPasswordReset();\r\n      }\r\n    });\r\n  };\r\n\r\n  renderLoadingPage() {\r\n    return (\r\n      <ul className=\"MenuUl bg-dark w-100 h-100 row\">\r\n        <h4 className=\"mb-5\">\r\n          <span className=\"creatorHeader\">Page loading...</span>\r\n        </h4>\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  renderAccessDeniedPage() {\r\n    return (\r\n      <ul className=\"MenuUl bg-dark w-100 h-100 row\">\r\n        <li className=\"md-5\">\r\n          <h3 className=\"mb-5\">\r\n            <span className=\"creatorHeader\">Access denied</span>\r\n          </h3>\r\n          <h5>\r\n            If you're trying to reset your password, this link may be an old\r\n            password reset link.<br></br> Please look for the latest one in your\r\n            inbox/spam folder or request a new one.\r\n          </h5>\r\n        </li>\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  renderPasswordResetPage() {\r\n    const { newPassword, confirmPassword, errorMessage, toLogin } = this.state;\r\n\r\n    if (toLogin) {\r\n      return <Redirect push to=\"/home/login\" />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"HomeBg\">\r\n        <div className=\"HomeBgContent\">\r\n          <form onSubmit={this.handleChangePasswordFormSubmit}>\r\n            <ul className=\"MenuUl bg-dark w-100\">\r\n              <h4 className=\"mb-5\">\r\n                <span className=\"creatorHeader\">D&amp;D Online Board</span>\r\n              </h4>\r\n              <h4>Reset Password</h4>\r\n              <li>\r\n                <input\r\n                  className=\"input-group-sm form-control mt-3\"\r\n                  type=\"password\"\r\n                  id=\"newPassword\"\r\n                  value={newPassword}\r\n                  placeholder=\"New Password\"\r\n                  required\r\n                  onChange={(event) =>\r\n                    this.setState({ newPassword: event.target.value })\r\n                  }\r\n                />\r\n              </li>\r\n              <li>\r\n                <input\r\n                  className=\"input-group-sm form-control mt-3\"\r\n                  type=\"password\"\r\n                  id=\"confirmPassword\"\r\n                  value={confirmPassword}\r\n                  placeholder=\"Confirm Password\"\r\n                  required\r\n                  onChange={(event) =>\r\n                    this.setState({ confirmPassword: event.target.value })\r\n                  }\r\n                />\r\n              </li>\r\n              <li>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary form-control mt-3\"\r\n                >\r\n                  Submit\r\n                </button>\r\n              </li>\r\n              {errorMessage ? (\r\n                <li className=\"nav-item col mt-4\">\r\n                  <h4>\r\n                    <span className=\"badge badge-danger\">{errorMessage}</span>\r\n                  </h4>\r\n                </li>\r\n              ) : null}\r\n            </ul>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { tokenValid, isLoading } = this.state;\r\n    if (isLoading) {\r\n      return this.renderLoadingPage();\r\n    } else if (tokenValid) {\r\n      return this.renderPasswordResetPage();\r\n    } else {\r\n      return this.renderAccessDeniedPage();\r\n    }\r\n  }\r\n}\r\n\r\nexport default ResetPasswordForm;\r\n","import React, { Component } from \"react\";\r\nimport \"./popUp.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nclass ExitWarningPopUp extends Component {\r\n  handleExitToMenu = (stateData) => {\r\n    this.props.closePopup();\r\n    this.props.onExitToMenu();\r\n  };\r\n\r\n  handleCancelExit = () => {\r\n    this.props.closePopup();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"PopUp\">\r\n        <div className=\"ExitWarningPopUpInner\">\r\n          <div\r\n            className=\"nav nav-tabs flex-column text-white bg-dark row w-100\"\r\n            style={{ border: \"8px double blue\", fontSize: 15, padding: 20 }}\r\n          >\r\n            <h4>\r\n              Exiting to menu will cause the loss of any unsaved changes.\r\n              <br></br>\r\n              <br></br>\r\n              Continue?\r\n            </h4>\r\n            <span className=\"inline-form\">\r\n              <button\r\n                onClick={this.handleExitToMenu}\r\n                className=\"btn btn-primary form-control ml-3 mt-3 col-7 d-inline\"\r\n              >\r\n                Yes - Exit to Menu\r\n              </button>\r\n              <button\r\n                onClick={this.handleCancelExit}\r\n                className=\"btn btn-danger form-control ml-2 mt-3 col-4 d-inline\"\r\n              >\r\n                No - Back to Game\r\n              </button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ExitWarningPopUp;\r\n","import React, { Component, Fragment } from \"react\";\r\nimport \"./App.css\";\r\nimport DiceRoller from \"./diceRoller\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport MapCanvas from \"./mapCanvas\";\r\nimport CharacterCreatorPopUp from \"./characterCreatorPopUp\";\r\nimport ActionsMenu from \"./actionsMenu\";\r\nimport CloneDeep from \"lodash/cloneDeep\";\r\nimport ErrorBoundary from \"react-error-boundary\";\r\nimport { DefaultFallbackComponent } from \"../constants\";\r\nimport {\r\n  CallGetGameDataAPI,\r\n  CallSaveNewGameDataAPI,\r\n  CallUpdateGameDataAPI,\r\n} from \"../apiUtils\";\r\nimport SpellCircleCreatorPopUp from \"./spellCircleCreatorPopUp\";\r\nimport WelcomeScreen from \"./welcomeScreen\";\r\nimport TempMessage from \"./tempMessage\";\r\nimport ResetPasswordForm from \"./resetPasswordForm\";\r\nimport ExitWarningPopUp from \"./exitWarningPopUp\";\r\nimport { Persist } from \"react-persist\";\r\nimport { Route, Redirect, Switch, Link } from \"react-router-dom\";\r\nimport \"./home.css\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    authToken: null,\r\n    userName: \"\",\r\n    rowCount: this.props.rowCount,\r\n    colCount: this.props.colCount,\r\n    walls: [\r\n      // { row: 1, col: 1 },\r\n      // { row: 1, col: 2 }\r\n    ],\r\n    cellSize: this.props.cellSize,\r\n    borderWidth: Math.ceil(this.props.cellSize * 0.02),\r\n    matrix: null,\r\n    selectedChar: null,\r\n    placingChar: null,\r\n    selectedCircle: null,\r\n    placingCircle: null,\r\n    itemDeletionModeOn: false,\r\n    showTempMessage: false,\r\n    tempMessageText: \"\",\r\n    mapImage: {\r\n      url: this.props.bgImageLink,\r\n      file: null,\r\n    },\r\n    resetPasswordScreen: false,\r\n    spellCircles: [],\r\n    characters: [],\r\n    showCharacterCreatorPopup: false,\r\n    showSpellCircleCreatorPopup: false,\r\n    showExitWarningPopUp: false,\r\n    showGameMenu: true,\r\n    toGameMenu: false,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.matrix = this.createMatrix(\r\n      this.props.rowCount,\r\n      this.props.colCount\r\n    );\r\n    if (window.location.href.split(\"/\").includes(\"reset\")) {\r\n      localStorage.removeItem(\"dnd-app\");\r\n      this.state.resetPasswordScreen = true;\r\n    }\r\n  }\r\n\r\n  initiateGame() {\r\n    this.setState({ walls: [], spellCircles: [], characters: [] });\r\n  }\r\n\r\n  setStateFromSavedGameData(savedGameData) {\r\n    const matrix = this.createMatrix(\r\n      savedGameData.rowCount,\r\n      savedGameData.colCount\r\n    );\r\n    const borderWidth = Math.ceil(savedGameData.cellSize * 0.02);\r\n    this.setState({\r\n      ...savedGameData,\r\n      matrix,\r\n      borderWidth,\r\n    });\r\n  }\r\n\r\n  createMatrix(rowCount, colCount) {\r\n    let myarr = [];\r\n    for (let i = 0; i < rowCount; i++) {\r\n      let row = [];\r\n      for (let j = 0; j < colCount; j++) {\r\n        let cell = {\r\n          row: i,\r\n          col: j,\r\n          wall: this.isCellWall(i, j),\r\n        };\r\n        row.push(cell);\r\n      }\r\n      myarr.push(row);\r\n    }\r\n    return myarr;\r\n  }\r\n\r\n  isCellWall(row, col) {\r\n    const walls = this.state.walls.filter(\r\n      (c) => c.row === row && c.col === col\r\n    );\r\n    return walls.length > 0;\r\n  }\r\n\r\n  handleCellClick = (cell, triggerDeselect = true) => {\r\n    const { selectedChar, selectedCircle } = {\r\n      ...this.state,\r\n    };\r\n    if (selectedCircle) {\r\n      let spellCircles = [...this.state.spellCircles];\r\n      const spellCircleInd = this.moveSpellCircle(cell);\r\n      if (triggerDeselect) {\r\n        spellCircles = this.getSpellCirclesArrWithoutSelection();\r\n        this.setState({\r\n          selectedCircle: null,\r\n          placingCircle: null,\r\n          spellCircles,\r\n        });\r\n      } else if (spellCircleInd > -1) {\r\n        this.setState({ selectedCircle: spellCircles[spellCircleInd] });\r\n      }\r\n    }\r\n\r\n    if (selectedChar) {\r\n      let characters = [...this.state.characters];\r\n      if (cell.wall) {\r\n        if (triggerDeselect) {\r\n          characters = this.getCharsArrWithoutSelection();\r\n          this.setState({ selectedChar: null, placingChar: null, characters });\r\n        }\r\n        return;\r\n      }\r\n\r\n      const charInd = this.moveCharacter(cell);\r\n      if (triggerDeselect) {\r\n        characters = this.getCharsArrWithoutSelection();\r\n        this.setState({ selectedChar: null, placingChar: null, characters });\r\n      } else if (charInd > -1) {\r\n        this.setState({ selectedChar: characters[charInd] });\r\n      }\r\n    }\r\n  };\r\n\r\n  // handleKeyUp = e => {\r\n  //   let { selectedChar, matrix } = this.state;\r\n  //   if (!selectedChar) {\r\n  //     return;\r\n  //   }\r\n\r\n  //   let rowAdd = 0;\r\n  //   let colAdd = 0;\r\n\r\n  //   switch (e.keyCode) {\r\n  //     case 37: // Left\r\n  //       rowAdd = 0;\r\n  //       colAdd = -1;\r\n  //       break;\r\n  //     case 38: // Up\r\n  //       rowAdd = -1;\r\n  //       colAdd = 0;\r\n  //       break;\r\n  //     case 39: // Right\r\n  //       rowAdd = 0;\r\n  //       colAdd = 1;\r\n  //       break;\r\n  //     case 40: // Down\r\n  //       rowAdd = 1;\r\n  //       colAdd = 0;\r\n  //       break;\r\n  //     default:\r\n  //       const characters = this.getCharsArrWithoutSelection();\r\n  //       this.setState({ selectedChar: null, placingChar: null, characters });\r\n  //       return;\r\n  //   }\r\n  //   const row = selectedChar.topLeftRow + rowAdd;\r\n  //   const col = selectedChar.topLeftCol + colAdd;\r\n  //   if (this.checkIndicesValid(row, col, row, col)) {\r\n  //     this.handleCellClick(matrix[row][col], false);\r\n  //   }\r\n  // };\r\n\r\n  handleKeyUp = (e) => {\r\n    let { selectedChar, selectedCircle } = { ...this.state };\r\n    if (selectedChar) {\r\n      const characters = this.getCharsArrWithoutSelection();\r\n      this.setState({ selectedChar: null, placingChar: null, characters });\r\n    } else if (selectedCircle) {\r\n      const spellCircles = this.getSpellCirclesArrWithoutSelection();\r\n      this.setState({\r\n        selectedCircle: null,\r\n        placingCircle: null,\r\n        spellCircles,\r\n      });\r\n    }\r\n  };\r\n\r\n  getCharsArrWithoutSelection() {\r\n    let charactersCopy = [...this.state.characters];\r\n    if (charactersCopy[charactersCopy.length - 1].topLeftRow === null) {\r\n      // This happens when canceling the creation of a new character\r\n      charactersCopy.pop();\r\n    }\r\n    return charactersCopy;\r\n  }\r\n\r\n  getSpellCirclesArrWithoutSelection() {\r\n    let spellCirclesCopy = [...this.state.spellCircles];\r\n    if (spellCirclesCopy[spellCirclesCopy.length - 1].row === null) {\r\n      // This happens when canceling the creation of a new character\r\n      spellCirclesCopy.pop();\r\n    }\r\n    return spellCirclesCopy;\r\n  }\r\n\r\n  deleteCharacter(charToDelete) {\r\n    let characters = [...this.state.characters];\r\n    characters = characters.filter((char) => char !== charToDelete);\r\n    this.setState({ characters });\r\n    if (characters.length === 0 && this.state.spellCircles.length === 0) {\r\n      this.toggleItemDeletionMode();\r\n    }\r\n  }\r\n\r\n  handleCharClick = (char) => {\r\n    let { selectedChar, placingChar, itemDeletionModeOn } = {\r\n      ...this.state,\r\n    };\r\n    if (itemDeletionModeOn) {\r\n      this.deleteCharacter(char);\r\n    } else {\r\n      selectedChar = char;\r\n      placingChar = { ...char }; // A copy of the character for the movement\r\n      this.setState({ selectedChar, placingChar });\r\n    }\r\n  };\r\n\r\n  handleSpellCircleClick = (spellCircle) => {\r\n    let { selectedCircle, placingCircle, itemDeletionModeOn } = {\r\n      ...this.state,\r\n    };\r\n    if (itemDeletionModeOn) {\r\n      this.deleteSpellCircle(spellCircle);\r\n    } else {\r\n      selectedCircle = spellCircle;\r\n      placingCircle = { ...spellCircle }; // A copy of the spellCircle for the movement\r\n      this.setState({ selectedCircle, placingCircle });\r\n    }\r\n  };\r\n\r\n  deleteSpellCircle(spellCircleToDelete) {\r\n    let spellCircles = [...this.state.spellCircles];\r\n    spellCircles = spellCircles.filter(\r\n      (spellCircle) => spellCircle !== spellCircleToDelete\r\n    );\r\n    this.setState({ spellCircles });\r\n    if (this.state.characters.length === 0 && spellCircles.length === 0) {\r\n      this.toggleItemDeletionMode();\r\n    }\r\n  }\r\n\r\n  getSelectedCharCells(char) {\r\n    let selectedCells = [];\r\n    const { matrix } = this.state;\r\n    const lastRowInd = char.heightCells + char.topLeftRow - 1;\r\n    const lastColInd = char.widthCells + char.topLeftCol - 1;\r\n    if (\r\n      !this.checkIndicesValid(\r\n        char.topLeftRow,\r\n        char.topLeftCol,\r\n        lastRowInd,\r\n        lastColInd\r\n      )\r\n    ) {\r\n      console.warn(\"Can't place character outside map boundary!\");\r\n      return [];\r\n    }\r\n    for (let row = char.topLeftRow; row < lastRowInd + 1; row++) {\r\n      for (let col = char.topLeftCol; col < lastColInd + 1; col++) {\r\n        selectedCells.push(matrix[row][col]);\r\n      }\r\n    }\r\n    return selectedCells;\r\n  }\r\n\r\n  checkIndicesValid(smallRow, smallCol, largeRow, largeCol) {\r\n    const { rowCount, colCount } = this.props;\r\n    return (\r\n      smallRow >= 0 &&\r\n      smallCol >= 0 &&\r\n      largeRow < rowCount &&\r\n      largeCol < colCount\r\n    );\r\n  }\r\n\r\n  moveCharacter(cell) {\r\n    const { characters, selectedChar } = { ...this.state };\r\n    const charInd = characters.indexOf(selectedChar);\r\n    const { row, col } = cell;\r\n    if (!this.isNewCharPosValid({ row, col })) {\r\n      return -1;\r\n    }\r\n\r\n    characters[charInd] = { ...this.state.selectedChar };\r\n    characters[charInd].topLeftRow = row;\r\n    characters[charInd].topLeftCol = col;\r\n    this.setState({ characters });\r\n    return charInd;\r\n  }\r\n\r\n  moveSpellCircle(cell) {\r\n    const { spellCircles, selectedCircle } = { ...this.state };\r\n    const circleInd = spellCircles.indexOf(selectedCircle);\r\n    const { row, col } = cell;\r\n\r\n    spellCircles[circleInd] = { ...this.state.selectedCircle };\r\n    spellCircles[circleInd].row = row;\r\n    spellCircles[circleInd].col = col;\r\n    this.setState({ spellCircles });\r\n    return circleInd;\r\n  }\r\n\r\n  isNewCharPosValid(newPositionInd) {\r\n    let selectedCharCopy = CloneDeep(this.state.selectedChar);\r\n    selectedCharCopy.topLeftRow = newPositionInd.row;\r\n    selectedCharCopy.topLeftCol = newPositionInd.col;\r\n    return this.getSelectedCharCells(selectedCharCopy).length > 0;\r\n  }\r\n\r\n  calcCharPosition = (char) => {\r\n    const { cellSize } = this.props;\r\n    const { borderWidth } = this.state;\r\n    let xPixels = null;\r\n    let yPixels = null;\r\n    if (char.topLeftRow !== null && char.topLeftCol !== null) {\r\n      xPixels = char.topLeftRow * cellSize + borderWidth;\r\n      yPixels = char.topLeftCol * cellSize + borderWidth;\r\n    }\r\n\r\n    return {\r\n      topLeft: {\r\n        row: xPixels,\r\n        col: yPixels,\r\n      },\r\n      width: char.widthCells * cellSize - 2 * borderWidth,\r\n      height: char.heightCells * cellSize - 2 * borderWidth,\r\n    };\r\n  };\r\n\r\n  calcSpellCirclePosition = (spellCircle) => {\r\n    const { cellSize } = this.props;\r\n    let xPixels = null;\r\n    let yPixels = null;\r\n    if (spellCircle.row !== null && spellCircle.col !== null) {\r\n      xPixels =\r\n        spellCircle.row * cellSize - (spellCircle.radius / 5 - 0.5) * cellSize;\r\n      yPixels =\r\n        spellCircle.col * cellSize - (spellCircle.radius / 5 - 0.5) * cellSize;\r\n    }\r\n\r\n    return {\r\n      row: xPixels,\r\n      col: yPixels,\r\n      radius: spellCircle.radius * (cellSize / 5),\r\n    };\r\n  };\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keyup\", this.handleKeyUp, false);\r\n    if (localStorage.getItem(\"dnd-app\")) {\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keyup\", this.handleKeyUp, false);\r\n  }\r\n\r\n  handleMouseEnterCell = (cell) => {\r\n    let { placingChar, placingCircle } = { ...this.state };\r\n    if (placingChar) {\r\n      placingChar.topLeftRow = cell.row;\r\n      placingChar.topLeftCol = cell.col;\r\n      this.setState({ placingChar });\r\n    } else if (placingCircle) {\r\n      placingCircle.row = cell.row;\r\n      placingCircle.col = cell.col;\r\n      this.setState({ placingCircle });\r\n    }\r\n  };\r\n\r\n  handleCharacterCreation = (stateData) => {\r\n    const { characterName, height, width, avatarImage } = stateData;\r\n    let newChar = {\r\n      name: characterName,\r\n      image: { url: avatarImage, file: null },\r\n      topLeftRow: null,\r\n      topLeftCol: null,\r\n      heightCells: height,\r\n      widthCells: width,\r\n    };\r\n    const characters = [...this.state.characters];\r\n    characters.push(newChar);\r\n    this.setState({\r\n      characters,\r\n      placingChar: { ...newChar },\r\n      selectedChar: newChar,\r\n    });\r\n  };\r\n\r\n  toggleCharacterCreatorPopup = () => {\r\n    this.setState({\r\n      showCharacterCreatorPopup: !this.state.showCharacterCreatorPopup,\r\n    });\r\n  };\r\n\r\n  handleSpellCircleCreation = (stateData) => {\r\n    const { spellName, ownerName, radius, color } = stateData;\r\n    const newCircle = {\r\n      name: spellName,\r\n      owner: ownerName,\r\n      radius,\r\n      row: null,\r\n      col: null,\r\n      color,\r\n    };\r\n    const spellCircles = [...this.state.spellCircles];\r\n    spellCircles.push(newCircle);\r\n    this.setState({\r\n      spellCircles,\r\n      placingCircle: { ...newCircle },\r\n      selectedCircle: newCircle,\r\n    });\r\n  };\r\n\r\n  toggleItemDeletionMode = () => {\r\n    const { itemDeletionModeOn, selectedChar } = this.state;\r\n    if (selectedChar) {\r\n      this.setState({\r\n        selectedChar: null,\r\n        placingChar: null,\r\n        characters: this.getCharsArrWithoutSelection(),\r\n      }); // Cancel character selection\r\n    }\r\n    this.setState({ itemDeletionModeOn: !itemDeletionModeOn });\r\n  };\r\n\r\n  toggleSpellCircleCreatorPopup = () => {\r\n    this.setState({\r\n      showSpellCircleCreatorPopup: !this.state.showSpellCircleCreatorPopup,\r\n    });\r\n  };\r\n\r\n  toggleExitWarningPopUp = () => {\r\n    const { showExitWarningPopUp } = { ...this.state };\r\n    this.setState({ showExitWarningPopUp: !showExitWarningPopUp });\r\n  };\r\n\r\n  handleSaveGame = () => {\r\n    const {\r\n      authToken,\r\n      rowCount,\r\n      colCount,\r\n      walls,\r\n      cellSize,\r\n      spellCircles,\r\n      characters,\r\n      mapImage,\r\n    } = this.state;\r\n    const gameStateToSave = {\r\n      rowCount,\r\n      colCount,\r\n      walls,\r\n      cellSize,\r\n      spellCircles,\r\n      characters,\r\n      mapImage,\r\n    };\r\n    this.createOrUpdateGameState({ gameState: gameStateToSave }, authToken);\r\n  };\r\n\r\n  createOrUpdateGameState(body_object, authToken) {\r\n    const promiseGet = CallGetGameDataAPI(authToken);\r\n    promiseGet.then((resGet) => {\r\n      if (!resGet) return;\r\n      const apiCall =\r\n        resGet.status !== 200 ? CallSaveNewGameDataAPI : CallUpdateGameDataAPI;\r\n      const promisePost = apiCall(body_object, authToken);\r\n      promisePost.then((resPost) => {\r\n        if (!resPost) return;\r\n        if (resPost.status !== 200) {\r\n          console.error(resPost.body.error.message);\r\n        } else {\r\n          this.showTempMessage(\"Game Saved Sucessfully!\", 1500);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  showTempMessage(messageText, timeoutMs) {\r\n    this.setState({ tempMessageText: messageText }, () => {\r\n      this.setState({ showTempMessage: true }, () => {\r\n        setTimeout(\r\n          () => this.setState({ showTempMessage: false, tempMessageText: \"\" }),\r\n          timeoutMs\r\n        );\r\n      });\r\n    });\r\n  }\r\n\r\n  handleRegisteredNewUser = () => {\r\n    this.showTempMessage(\"User registered successfully!\", 1500);\r\n  };\r\n\r\n  handleStartNewGame = () => {\r\n    this.setState({ showGameMenu: false, toGameMenu: false });\r\n    this.initiateGame();\r\n  };\r\n\r\n  handleContinueSavedGame = () => {\r\n    this.setState({ showGameMenu: false, toGameMenu: false });\r\n    const promise = CallGetGameDataAPI(this.state.authToken);\r\n    promise.then((res) => {\r\n      if (!res) return;\r\n      if (res.status !== 200) {\r\n        console.error(res.body.error.message);\r\n      } else {\r\n        this.setStateFromSavedGameData(res.body.gameState);\r\n      }\r\n    });\r\n  };\r\n\r\n  handlePasswordResetComplete = () => {\r\n    this.showTempMessage(\"Password changed successfully!\", 2000);\r\n  };\r\n\r\n  handleExitToMenu = () => {\r\n    this.setState({ toGameMenu: true });\r\n  };\r\n\r\n  handleLogIn = (userName, authToken) => {\r\n    this.setState({ authToken, userName });\r\n  };\r\n\r\n  cancelRedirectFromMap = () => {\r\n    this.setState({ toGameMenu: false });\r\n  };\r\n\r\n  renderWelcomeScreen() {\r\n    return (\r\n      <ErrorBoundary FallbackComponent={DefaultFallbackComponent}>\r\n        <WelcomeScreen\r\n          onNewGame={this.handleStartNewGame}\r\n          onContinueSavedGame={this.handleContinueSavedGame}\r\n          onRegisteredNewUser={this.handleRegisteredNewUser}\r\n          authToken={this.state.authToken}\r\n          userName={this.state.userName}\r\n          onLogOut={() => this.setState({ authToken: null, userName: \"\" })}\r\n          onLogIn={this.handleLogIn}\r\n          cancelRedirectFromMap={this.cancelRedirectFromMap}\r\n        />\r\n        {this.state.showTempMessage ? (\r\n          <TempMessage message={this.state.tempMessageText} />\r\n        ) : null}\r\n      </ErrorBoundary>\r\n    );\r\n  }\r\n\r\n  renderPasswordResetScreen() {\r\n    return (\r\n      <ErrorBoundary FallbackComponent={DefaultFallbackComponent}>\r\n        <ResetPasswordForm onPasswordReset={this.handlePasswordResetComplete} />\r\n        {this.state.showTempMessage ? (\r\n          <TempMessage message={this.state.tempMessageText} />\r\n        ) : null}\r\n      </ErrorBoundary>\r\n    );\r\n  }\r\n\r\n  renderSideBar() {\r\n    const { characters, spellCircles, itemDeletionModeOn } = this.state;\r\n    return (\r\n      <div className=\"SideBar col-3 bg-primary\">\r\n        <ErrorBoundary FallbackComponent={DefaultFallbackComponent}>\r\n          <ActionsMenu\r\n            onCharacterCreation={this.toggleCharacterCreatorPopup}\r\n            onSpellCircleCreation={this.toggleSpellCircleCreatorPopup}\r\n            onCharacterCircleDelete={this.toggleItemDeletionMode}\r\n            onGameSave={this.handleSaveGame}\r\n            enableDeletion={characters.length > 0 || spellCircles.length > 0}\r\n            itemDeletionModeOn={itemDeletionModeOn}\r\n            onFinishDeletion={this.toggleItemDeletionMode}\r\n            onExitToMenu={this.toggleExitWarningPopUp}\r\n          />\r\n        </ErrorBoundary>\r\n        <ErrorBoundary FallbackComponent={DefaultFallbackComponent}>\r\n          <DiceRoller />\r\n        </ErrorBoundary>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMapArea() {\r\n    const {\r\n      rowCount,\r\n      colCount,\r\n      walls,\r\n      cellSize,\r\n      borderWidth,\r\n      selectedChar,\r\n      characters,\r\n      selectedCircle,\r\n      spellCircles,\r\n      matrix,\r\n      placingChar,\r\n      itemDeletionModeOn,\r\n      placingCircle,\r\n      mapImage,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"MapArea col-9 h-100 p-0\">\r\n        <ErrorBoundary FallbackComponent={DefaultFallbackComponent}>\r\n          <MapCanvas\r\n            rowCount={rowCount}\r\n            colCount={colCount}\r\n            walls={walls}\r\n            cellSize={cellSize}\r\n            borderWidth={borderWidth}\r\n            selectedChar={selectedChar}\r\n            characters={characters}\r\n            selectedCircle={selectedCircle}\r\n            spellCircles={spellCircles}\r\n            matrix={matrix}\r\n            onCellClick={this.handleCellClick}\r\n            onCharClick={this.handleCharClick}\r\n            onCalcCharPosition={this.calcCharPosition}\r\n            onCalcSpellCirclePosition={this.calcSpellCirclePosition}\r\n            onMouseEnterCell={this.handleMouseEnterCell}\r\n            placingChar={placingChar}\r\n            itemDeletionModeOn={itemDeletionModeOn}\r\n            onSpellCircleClick={this.handleSpellCircleClick}\r\n            placingCircle={placingCircle}\r\n            mapImage={mapImage}\r\n          ></MapCanvas>\r\n        </ErrorBoundary>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderPopUps() {\r\n    const {\r\n      showTempMessage,\r\n      tempMessageText,\r\n      showCharacterCreatorPopup,\r\n      showSpellCircleCreatorPopup,\r\n      showExitWarningPopUp,\r\n    } = this.state;\r\n    return (\r\n      <Fragment>\r\n        {showCharacterCreatorPopup ? (\r\n          <ErrorBoundary FallbackComponent={DefaultFallbackComponent}>\r\n            <CharacterCreatorPopUp\r\n              closePopup={this.toggleCharacterCreatorPopup}\r\n              onCharacterCreation={this.handleCharacterCreation}\r\n            />\r\n          </ErrorBoundary>\r\n        ) : null}\r\n        {showSpellCircleCreatorPopup ? (\r\n          <ErrorBoundary FallbackComponent={DefaultFallbackComponent}>\r\n            <SpellCircleCreatorPopUp\r\n              closePopup={this.toggleSpellCircleCreatorPopup}\r\n              onSpellCircleCreation={this.handleSpellCircleCreation}\r\n            />\r\n          </ErrorBoundary>\r\n        ) : null}\r\n        {showExitWarningPopUp ? (\r\n          <ErrorBoundary FallbackComponent={DefaultFallbackComponent}>\r\n            <ExitWarningPopUp\r\n              closePopup={this.toggleExitWarningPopUp}\r\n              onExitToMenu={this.handleExitToMenu}\r\n            />\r\n          </ErrorBoundary>\r\n        ) : null}\r\n        {showTempMessage ? <TempMessage message={tempMessageText} /> : null}\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderNotLoggedInError() {\r\n    return (\r\n      <div className=\"HomeBg\">\r\n        <div className=\"HomeBgContent\">\r\n          <ul className=\"MenuUl bg-dark w-100\">\r\n            <h4 className=\"mb-4\">\r\n              <span className=\"creatorHeader\">Hey... unknown user!</span>\r\n              <br></br>\r\n              <br></br>\r\n              Oops! You can't see the game map if you're not logged in :)\r\n              <br></br>\r\n              Please log in to play.\r\n            </h4>\r\n            <Link to=\"/home/login\">Login Here</Link>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMapMainScreen() {\r\n    if (this.state.authToken) {\r\n      return (\r\n        <div className=\"row h-100 w-100 p-0\">\r\n          {this.renderMapArea()}\r\n          {this.renderSideBar()}\r\n          {this.renderPopUps()})\r\n        </div>\r\n      );\r\n    } else {\r\n      return this.renderNotLoggedInError();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Switch>\r\n          <Redirect exact from=\"/\" to=\"/home\" />\r\n          {this.state.toGameMenu ? (\r\n            <Redirect exact push from=\"/map\" to=\"/home\" />\r\n          ) : null}\r\n          <Route path=\"/reset\">{this.renderPasswordResetScreen()}</Route>\r\n          <Route path=\"/map\">{this.renderMapMainScreen()}</Route>\r\n          <Route path=\"/home\">{this.renderWelcomeScreen()}</Route>\r\n        </Switch>\r\n        <Persist\r\n          name=\"dnd-app\"\r\n          data={this.state}\r\n          debounce={500}\r\n          onMount={(data) => this.setState(data)}\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { HashRouter, Route } from \"react-router-dom\";\r\nimport { DEFAULT_MAP_IMG_PATH } from \"./constants\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <div className=\"container-fluid DNDMapContainer\">\r\n      <HashRouter>\r\n        <Route path=\"/\">\r\n          <App\r\n            cellSize={45}\r\n            rowCount={15}\r\n            colCount={15}\r\n            bgImageLink={DEFAULT_MAP_IMG_PATH}\r\n          />\r\n        </Route>\r\n      </HashRouter>\r\n    </div>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}